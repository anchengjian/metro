You will need Node 6 or newer in order to build the Metro website.

# Run the server

The first time, get all the dependencies loaded via

```
yarn
```

in the root directory.

Then, run the server via

```
npm start
Open http://localhost:3000
```

Anytime you change the contents, just refresh the page and it's going to be
updated

# Publish the website

The Metro website is hosted as a GitHub page. A static site is generated by
`server/generate.js` and its output is pushed to the `gh-pages` branch by
CircleCI whenever `master` is updated.

To deploy the website manually, run the following command as a Git user with
write permissions:

```
DEPLOY_USER=facebook GIT_USER=metro-bot CIRCLE_PROJECT_USERNAME=facebook CIRCLE_PROJECT_REPONAME=metro npm run gh-pages
```

## Staging

Run the above command against your own fork of `facebook/metro`:

```
DEPLOY_USER=YOUR_GITHUB_USERNAME GIT_USER=YOUR_GITHUB_USERNAME CIRCLE_PROJECT_USERNAME=YOUR_GITHUB_USERNAME CIRCLE_PROJECT_REPONAME=metro npm run gh-pages
```

## Translations & Localization

> [Docusaurus](https://docusaurus.io/docs/en/next/translation) allows for easy translation functionality using [Crowdin](https://crowdin.com/). Documentation files written in English are uploaded to Crowdin for translation by users within a community.   

And you can preview locally

```bash
# 1. Install crowdin
# https://support.crowdin.com/cli-tool/

# 3. You may need to turn on the language switch
# The `languages.js` file tells Docusaurus what languages you want to enable for your site. At present, English and Chinese have been enabled.

# 4. Translating `i18n/zh-CN.json`
# If there is no json file you want here, you can create a new one. for example `日本語`
cp i18n/en.json i18n/ja.json
# Translating `i18n/xxx.json` and git add the `i18n/xxx.json`
git add i18n/ja.json -f && git commit -m 'docs: init i18n/ja.json'

# 5. Translating Other Docs
# see [https://crowdin.com/project/metro](https://crowdin.com/project/metro)

# 6. Download crowdin data
CROWDIN_DOCUSAURUS_PROJECT_ID=metro CROWDIN_DOCUSAURUS_API_KEY=534eb0e7da51d71c298d7cc7efd3de79 yarn run crowdin-download

# 7. Start local server
yarn start

# 8. Push and PR
```
